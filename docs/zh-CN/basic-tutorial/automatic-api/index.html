<!DOCTYPE html><html lang="zh-CN"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Automatic API · RCRE</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="&lt;p&gt;We use ajax to request the backend interface to get the data.&lt;/p&gt;
"/><meta name="docsearch:language" content="zh-CN"/><meta property="og:title" content="Automatic API · RCRE"/><meta property="og:type" content="website"/><meta property="og:url" content="https://andycall.github.io/RCRE/"/><meta property="og:description" content="&lt;p&gt;We use ajax to request the backend interface to get the data.&lt;/p&gt;
"/><meta property="og:image" content="https://andycall.github.io/RCRE/img/undraw_online.svg"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://andycall.github.io/RCRE/img/undraw_tweetstorm.svg"/><link rel="shortcut icon" href="/RCRE/undefined"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><script>
              (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
              (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
              m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
              })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

              ga('create', 'UA-139149146-1', 'auto');
              ga('send', 'pageview');
            </script><link rel="stylesheet" href="/RCRE/css/code-block-button.css"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.0/clipboard.min.js"></script><script type="text/javascript" src="/RCRE/js/code-block-button.js"></script><script src="https://unpkg.com/vanilla-back-to-top@7.1.14/dist/vanilla-back-to-top.min.js"></script><script>
        document.addEventListener('DOMContentLoaded', function() {
          addBackToTop(
            {"zIndex":100}
          )
        });
        </script><link rel="stylesheet" href="/RCRE/css/prism.css"/><link rel="stylesheet" href="/RCRE/css/main.css"/><script src="/RCRE/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/RCRE/zh-CN"><h2 class="headerTitle">RCRE</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class="siteNavGroupActive"><a href="/RCRE/docs/zh-CN/overview" target="_self">Docs</a></li><li class=""><a href="/RCRE/zh-CN/users" target="_self">Users</a></li><li class=""><a href="https://github.com/andycall/RCRE" target="_self">GitHub</a></li><span><li><a id="languages-menu" href="#"><img class="languages-icon" src="/RCRE/img/language.svg" alt="Languages icon"/>中文</a><div id="languages-dropdown" class="hide"><ul id="languages-dropdown-items"><li><a href="/RCRE/docs/en/basic-tutorial/automatic-api">English</a></li></ul></div></li><script>
        const languagesMenuItem = document.getElementById("languages-menu");
        const languagesDropDown = document.getElementById("languages-dropdown");
        languagesMenuItem.addEventListener("click", function(event) {
          event.preventDefault();

          if (languagesDropDown.className == "hide") {
            languagesDropDown.className = "visible";
          } else {
            languagesDropDown.className = "hide";
          }
        });
      </script></span><li class="navSearchWrapper reactNavSearchWrapper"><input type="text" id="search_input_react" placeholder="Search" title="Search"/></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="container docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><i></i></div><h2><i>›</i><span>Basic Tutorial</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Introduction<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/RCRE/docs/zh-CN/overview">概览</a></li><li class="navListItem"><a class="navItem" href="/RCRE/docs/zh-CN/installation">Installation</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Basic Tutorial<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/RCRE/docs/zh-CN/basic-tutorial/basic-tutorial-info">Basics</a></li><li class="navListItem"><a class="navItem" href="/RCRE/docs/zh-CN/basic-tutorial/automatic-state">Automatic State</a></li><li class="navListItem navListItemActive"><a class="navItem" href="/RCRE/docs/zh-CN/basic-tutorial/automatic-api">Automatic API</a></li><li class="navListItem"><a class="navItem" href="/RCRE/docs/zh-CN/basic-tutorial/tasks">Tasks</a></li><li class="navListItem"><a class="navItem" href="/RCRE/docs/zh-CN/basic-tutorial/automatic-form">Automatic Form</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Automatic State<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/RCRE/docs/zh-CN/state-management/container-init-value">Container Init Value</a></li><li class="navListItem"><a class="navItem" href="/RCRE/docs/zh-CN/state-management/state-auto-recycle">State Auto Recycle</a></li><li class="navListItem"><a class="navItem" href="/RCRE/docs/zh-CN/state-management/use-lodash-path">Use Lodash Path</a></li><li class="navListItem"><a class="navItem" href="/RCRE/docs/zh-CN/state-management/debounce">Debounce</a></li><li class="navListItem"><a class="navItem" href="/RCRE/docs/zh-CN/state-management/cross-container-assignment">Cross Container Assignment</a></li><li class="navListItem"><a class="navItem" href="/RCRE/docs/zh-CN/state-management/dynamic-component">Dynamic Components</a></li><li class="navListItem"><a class="navItem" href="/RCRE/docs/zh-CN/state-management/multi-container">Multi Container</a></li><li class="navListItem"><a class="navItem" href="/RCRE/docs/zh-CN/state-management/dynamic-container">Dynamic Container</a></li><li class="navListItem"><a class="navItem" href="/RCRE/docs/zh-CN/state-management/sync-data-between-multi-container">Sync Data Between Multi Container</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Automatic API<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/RCRE/docs/zh-CN/automatic-api/required-params">Required Request Params</a></li><li class="navListItem"><a class="navItem" href="/RCRE/docs/zh-CN/automatic-api/condition">Customize Request Condition</a></li><li class="navListItem"><a class="navItem" href="/RCRE/docs/zh-CN/automatic-api/response-rewrite">Rewrite Response Data Before SetState</a></li><li class="navListItem"><a class="navItem" href="/RCRE/docs/zh-CN/automatic-api/serial-and-parallel-api">Serial And Parallel Request</a></li><li class="navListItem"><a class="navItem" href="/RCRE/docs/zh-CN/automatic-api/api-loading-state">Use API Loading State</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Tasks<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/RCRE/docs/zh-CN/tasks/pass-task">The Pass Task</a></li><li class="navListItem"><a class="navItem" href="/RCRE/docs/zh-CN/tasks/handle-task-error">Handle Task Error</a></li><li class="navListItem"><a class="navItem" href="/RCRE/docs/zh-CN/tasks/custom-tasks">Custom Tasks</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Automatic Form<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/RCRE/docs/zh-CN/form/dynamic-rules">Dynamic Rules</a></li><li class="navListItem"><a class="navItem" href="/RCRE/docs/zh-CN/form/custom-validation">Custom Validation</a></li><li class="navListItem"><a class="navItem" href="/RCRE/docs/zh-CN/form/read-form-state">Read Form State</a></li><li class="navListItem"><a class="navItem" href="/RCRE/docs/zh-CN/form/automatic-api-validation">Automatic API Validation</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Recipes<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/RCRE/docs/zh-CN/recipes/use-with-redux">Use With Redux</a></li><li class="navListItem"><a class="navItem" href="/RCRE/docs/zh-CN/recipes/use-with-react-router">Use With React Router</a></li><li class="navListItem"><a class="navItem" href="/RCRE/docs/zh-CN/recipes/watch-state-events">Watch State Events</a></li><li class="navListItem"><a class="navItem" href="/RCRE/docs/zh-CN/recipes/writing-tests">recipes/writing-tests</a></li><li class="navListItem"><a class="navItem" href="/RCRE/docs/zh-CN/recipes/debug-tools">Debug Tools</a></li><li class="navListItem"><a class="navItem" href="/RCRE/docs/zh-CN/recipes/usage-with-typescript">Usage With Typescript</a></li><li class="navListItem"><a class="navItem" href="/RCRE/docs/zh-CN/recipes/keep-state-immutable">Keep State Immutable</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">JSON Render<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/RCRE/docs/zh-CN/json-render/how-to-use-json-render">How To Use JSON Render</a></li><li class="navListItem"><a class="navItem" href="/RCRE/docs/zh-CN/json-render/use-dynamic-props">Use Dynamic Props</a></li><li class="navListItem"><a class="navItem" href="/RCRE/docs/zh-CN/json-render/use-external-functions">Use External Functions</a></li><li class="navListItem"><a class="navItem" href="/RCRE/docs/zh-CN/json-render/print-text">Print Text</a></li><li class="navListItem"><a class="navItem" href="/RCRE/docs/zh-CN/json-render/trigger-event">Trigger Event</a></li><li class="navListItem"><a class="navItem" href="/RCRE/docs/zh-CN/json-render/layout-system">Layout System</a></li><li class="navListItem"><a class="navItem" href="/RCRE/docs/zh-CN/json-render/dynamic-render">Dynamic Render</a></li><li class="navListItem"><a class="navItem" href="/RCRE/docs/zh-CN/json-render/render-control">Render Control</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Test<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/RCRE/docs/zh-CN/test/find-your-components">Find Your Components</a></li><li class="navListItem"><a class="navItem" href="/RCRE/docs/zh-CN/test/read-container-state">Read Container State</a></li><li class="navListItem"><a class="navItem" href="/RCRE/docs/zh-CN/test/set-data">Set Data</a></li><li class="navListItem"><a class="navItem" href="/RCRE/docs/zh-CN/test/simulate-event">Simulate Event</a></li><li class="navListItem"><a class="navItem" href="/RCRE/docs/zh-CN/test/read-form-state">Read Form State</a></li><li class="navListItem"><a class="navItem" href="/RCRE/docs/zh-CN/test/trigger-form-submit">Trigger Form Submit</a></li><li class="navListItem"><a class="navItem" href="/RCRE/docs/zh-CN/test/use-debug-mode">Use Debug Mode</a></li><li class="navListItem"><a class="navItem" href="/RCRE/docs/zh-CN/test/waiting-for-api">Waiting For API</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">API Reference<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/RCRE/docs/zh-CN/api/container">&lt;Container /&gt;</a></li><li class="navListItem"><a class="navItem" href="/RCRE/docs/zh-CN/api/ES">&lt;ES /&gt;</a></li><li class="navListItem"><a class="navItem" href="/RCRE/docs/zh-CN/api/task">任务</a></li><li class="navListItem"><a class="navItem" href="/RCRE/docs/zh-CN/api/data-provider">DataProvider</a></li></ul></div></div></section></div><script>
            var coll = document.getElementsByClassName('collapsible');
            var checkActiveCategory = true;
            for (var i = 0; i < coll.length; i++) {
              var links = coll[i].nextElementSibling.getElementsByTagName('*');
              if (checkActiveCategory){
                for (var j = 0; j < links.length; j++) {
                  if (links[j].classList.contains('navListItemActive')){
                    coll[i].nextElementSibling.classList.toggle('hide');
                    coll[i].childNodes[1].classList.toggle('rotate');
                    checkActiveCategory = false;
                    break;
                  }
                }
              }

              coll[i].addEventListener('click', function() {
                var arrow = this.childNodes[1];
                arrow.classList.toggle('rotate');
                var content = this.nextElementSibling;
                content.classList.toggle('hide');
              });
            }

            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              const headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                if (event.target.tagName === 'A') {
                  document.body.classList.remove('tocActive');
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer"><div class="wrapper"><div class="post"><header class="postHeader"><a class="edit-page-link button" href="https://github.com/andycall/RCRE/edit/master/docs/basic-tutorial/automatic-api.md" target="_blank" rel="noreferrer noopener">Edit</a><h1 class="postHeaderTitle">Automatic API</h1></header><article><div><span><p>We use ajax to request the backend interface to get the data.</p>
<p>There are many application scenarios that require the use of a backend interface. When we want to trigger an API, we wrote such codes below:</p>
<pre><code class="hljs css language-javascript"><span class="hljs-keyword">import</span> axios <span class="hljs-keyword">from</span> <span class="hljs-string">'axios'</span>;

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">callAnAPI</span>(<span class="hljs-params">data</span>) </span>{
    <span class="hljs-keyword">return</span> axios({
        <span class="hljs-attr">url</span>: <span class="hljs-string">'/example'</span>,
        <span class="hljs-attr">method</span>: <span class="hljs-string">'GET'</span>,
        <span class="hljs-attr">data</span>: data
    });
}

callAnAPI({
    <span class="hljs-attr">username</span>: <span class="hljs-string">'helloworld'</span>
});
</code></pre>
<p>We just call it when we need it, that's very simple. But when your application is complex, there will be many of API calls.</p>
<p>Things get bad when you need to trigger an API in parallel or have more than a dozen components, and any component update must trigger the same API repeatedly.</p>
<p>RCRE provider you an automatic API system that can trigger you API when needs. The only things you need to think is every API's params and trigger conditions.</p>
<h2><a class="anchor" aria-hidden="true" id="the-dataprovider-property"></a><a href="#the-dataprovider-property" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>The dataProvider property</h2>
<p>The automatic API system is integrated on the Container component. Just add the dataProvider property and have fun with APIs.</p>
<p>Let's update the previous example and add dataProvider property. <iframe src="https://codesandbox.io/embed/6203m5q09z?fontsize=14&view=editor" title="6203m5q09z" style="width:100%; height:500px; border:0; border-radius: 4px; overflow:hidden;" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin" mark="crwd-mark"></iframe></p>
<p>In this example, we add an dataProvider property to trigger an API call.</p>
<pre><code class="hljs css language-javascript">[{
  <span class="hljs-attr">mode</span>: <span class="hljs-string">"ajax"</span>,
  <span class="hljs-attr">namespace</span>: GITHUB_USER,
  <span class="hljs-attr">config</span>: {
    <span class="hljs-attr">url</span>: <span class="hljs-function">(<span class="hljs-params">{ $data }</span>) =&gt;</span>
      <span class="hljs-string">"https://api.github.com/users/"</span> + $data.username,
    <span class="hljs-attr">method</span>: <span class="hljs-string">"GET"</span>
  }
}]
</code></pre>
<p>the namespace is the name of this API, RCRE use this name to keep track of every APIS.</p>
<p>Every property under config property can be dynamic property. Use anonymous function to replace pure value to trigger recalculated when call this API, so you can read container state at this moment and return the newest value.</p>
<p>Every time when you update the input components, value will be sync to container and trigger dataProvider's API automatically. Every API will use the config property to compare with previous config to filter request which have the same params.</p>
<p>After the API is finished, the request value will pass to store and update to your <code>$data</code> property, so you can access them via <code>$data[namespace]</code>.</p>
</span></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="/RCRE/docs/zh-CN/basic-tutorial/automatic-state"><span class="arrow-prev">← </span><span>Automatic State</span></a><a class="docs-next button" href="/RCRE/docs/zh-CN/basic-tutorial/tasks"><span>Tasks</span><span class="arrow-next"> →</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#the-dataprovider-property">The dataProvider property</a></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><div><h5>Docs</h5><a href="/RCRE/docs/zh-CN/overview">Getting Started</a><a href="/RCRE/docs/zh-CN/doc2.html">Guides</a></div><div><h5>Community</h5></div><div><h5>More</h5><a href="https://github.com/andycall/RCRE">GitHub</a><a class="github-button" href="https://github.com/andycall/RCRE" data-icon="octicon-star" data-count-href="/andycall/RCRE/stargazers" data-show-count="true" data-count-aria-label="# stargazers on GitHub" aria-label="Star this project on GitHub">Star</a></div></section><section class="copyright">Copyright © 2019 AndyCall</section></footer></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script><script>
                document.addEventListener('keyup', function(e) {
                  if (e.target !== document.body) {
                    return;
                  }
                  // keyCode for '/' (slash)
                  if (e.keyCode === 191) {
                    const search = document.getElementById('search_input_react');
                    search && search.focus();
                  }
                });
              </script><script>
              var search = docsearch({
                
                apiKey: '4c41d5167d16570b349684f7a8688269',
                indexName: 'andycall-rcre',
                inputSelector: '#search_input_react',
                algoliaOptions: {}
              });
            </script></body></html>